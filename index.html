<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Esperalopy — Sitio oficial</title>
  <meta name="description" content="Sitio oficial de Esperalopy. Compra y ventas minoristas con atención cercana y confiable.">

  <!-- Open Graph / SEO -->
  <meta property="og:title" content="Esperalopy — Sitio oficial">
  <meta property="og:description" content="Compra y ventas minoristas con atención cercana y confiable.">
  <meta property="og:image" content="assets/og-image.png">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="es_PY">

  <!-- Seguridad básica (permite data: para placeholders) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data:; object-src 'none'; frame-ancestors 'none'; base-uri 'self'; form-action 'self'">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon.png">
  <link rel="icon" type="image/png" sizes="48x48" href="assets/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon.png">
  <link rel="shortcut icon" href="assets/favicon.png">

  <!-- CSS -->
  <link rel="preload" href="styles.css" as="style">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="assets/nav.css">

  <!-- Micro-animaciones + Toast + Lazy blur + Banner con marquee (IZQ → DER) -->
  <style>
    .card{
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      will-change: transform;
    }
    .card:hover{
      transform: translateY(-6px);
      box-shadow: 0 14px 28px rgba(0,0,0,.3);
      border-color: rgba(255,255,255,.2) !important;
    }
    .card a.btnWp, .card .btnReservar{
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
    }
    .card a.btnWp:hover, .card .btnReservar:hover{
      transform: translateY(-2px) scale(1.015);
      filter: brightness(1.04);
      box-shadow: 0 10px 18px rgba(0,0,0,.3);
    }

    /* Imagen con blur mientras carga */
    .lazy-img{
      filter: blur(12px);
      transform: scale(1.02);
      transition: filter .35s ease, transform .35s ease, opacity .25s ease;
      opacity: .9;
    }
    .lazy-loaded{
      filter: blur(0);
      transform: scale(1);
      opacity: 1;
    }

    /* Toast */
    #toast{
      position: fixed;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%) translateY(20px);
      background: rgba(15,23,42,.96);
      color: #fff;
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 12px;
      padding: 12px 16px;
      font-size: .95rem;
      box-shadow: 0 12px 28px rgba(0,0,0,.35);
      opacity: 0;
      pointer-events: none;
      transition: opacity .2s ease, transform .2s ease;
      z-index: 1000;
    }
    #toast.show{ opacity:1; transform: translateX(-50%) translateY(0); }

    /* Banner de novedades con MARQUEE (IZQUIERDA → DERECHA) */
    :root { --marquee-speed: 22s; } /* Más chico = más rápido */

    .promo-banner{
      position: sticky; top: 0; z-index: 1200;
      display:flex; align-items:center; gap:12px;
      padding:8px 12px; background:#0f172a; color:#fff;
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .promo-banner .marquee{
      flex:1; overflow:hidden; white-space:nowrap;
    }
    .promo-banner .marquee__inner{
      display:flex; gap:2rem;
      /* Sale desde la izquierda y avanza hacia la derecha */
      padding-right:100%;
      animation: marquee-ltr var(--marquee-speed) linear infinite;
    }
    .promo-banner .marquee__inner > span{
      flex:0 0 auto;
    }
    .promo-banner .x{
      border:none; background:transparent; color:#cbd5e1; font-size:18px; cursor:pointer;
      padding:4px 8px; line-height:1;
    }
    .promo-banner .x:hover{ color:#fff; }

    /* IZQ → DER: inicia fuera de la izquierda y termina adentro a la derecha */
    @keyframes marquee-ltr{
      0%   { transform: translateX(-100%); }
      100% { transform: translateX(0); }
    }

    /* Respeto accesibilidad: si el usuario prefiere menos movimiento, pauso la animación */
    @media (prefers-reduced-motion: reduce){
      .promo-banner .marquee__inner{ animation: none; padding-right: 0; }
    }
  </style>

  <!-- JS del sitio -->
  <script src="assets/main.js?v=3" defer></script>
</head>
<body>

  <!-- Banner de novedades con marquee IZQ → DER (se oculta si el usuario lo cierra) -->
  <div id="promoBanner" class="promo-banner" role="status" aria-live="polite" hidden>
    <div class="marquee" aria-hidden="true">
      <div class="marquee__inner">
        <span>🆕 Novedad: aceptamos <strong>efectivo</strong> y <strong>transferencia</strong>. ¡Consultá stock por WhatsApp!</span>
        <span>🆕 Novedad: aceptamos <strong>efectivo</strong> y <strong>transferencia</strong>. ¡Consultá stock por WhatsApp!</span>
        <span>🆕 Novedad: aceptamos <strong>efectivo</strong> y <strong>transferencia</strong>. ¡Consultá stock por WhatsApp!</span>
      </div>
    </div>
    <button class="x" aria-label="Cerrar aviso" title="Cerrar">×</button>
  </div>

  <!-- HEADER -->
  <header class="container">
    <nav class="nav" aria-label="Principal">
      <a class="brand" href="#inicio" aria-label="Inicio">
        <img src="assets/logo.png" alt="Logo Esperalopy">
        <span>Esperalopy</span>
      </a>
      <button class="hamburger" aria-label="Abrir menú" aria-expanded="false" aria-controls="main-menu">☰</button>
      <div class="menu" id="main-menu">
        <a href="#inicio">Inicio</a>
        <a href="#servicios">Servicios</a>
        <a href="#productos">Productos</a>
        <a href="#faq">Preguntas</a>
        <a href="#contacto" class="btn secondary">Contacto</a>
      </div>
    </nav>
  </header>

  <main id="inicio" class="container">
    <!-- HERO -->
    <section class="hero">
      <div>
        <h1 class="h1">Esperalopy: <span style="color:var(--accent)">donde tus productos vuelven a brillar</span>.</h1>
        <p class="lead">Compra y ventas minoristas con confianza, calidad y precios justos.</p>
        <div class="cta">
          <a class="btn primary" href="https://wa.me/595994252213?text=Hola%20Esperalopy!%20Vengo%20de%20tu%20web%20y%20quiero%20hacer%20una%20consulta."
             target="_blank" rel="noopener noreferrer">Escribime al WhatsApp</a>
          <a class="btn secondary" href="#servicios">Ver servicios</a>
        </div>
      </div>
      <img src="assets/hero.png" alt="Portada de Esperalopy">
    </section>

    <!-- SERVICIOS -->
    <section id="servicios" class="section">
      <div class="badge">Qué ofrecemos</div>
      <h2 style="margin:6px 0 16px 0">Servicios principales</h2>

      <div class="grid3">
        <article class="card">
          <img src="assets/feature1.png" alt="Calidad garantizada">
          <h3>Calidad que se nota</h3>
          <p>Productos y trabajos con estándares altos y revisión final antes de entregar.</p>
        </article>

        <article class="card">
          <img src="assets/feature2.png" alt="Atención cercana">
          <h3>Atención cercana</h3>
          <p>Conversamos por WhatsApp o correo, como te resulte más cómodo.</p>
        </article>

        <article class="card">
          <img src="assets/feature3.png" alt="Precios justos">
          <h3>Precios justos</h3>
          <p>Planes simples y flexibles. Pagás solo por lo que realmente necesitás.</p>
        </article>
      </div>
    </section>

    <!-- PRODUCTOS -->
    <section id="productos" class="section">
      <div class="badge">Catálogo</div>
      <h2 style="margin:6px 0 8px 0">Productos destacados</h2>
      <p style="opacity:.7; margin:0 0 12px 0; font-size:.95rem;">
        Nota: por el momento <strong>no manejamos compras en cuotas</strong>. Aceptamos efectivo y transferencia.
      </p>

      <header style="display:flex; align-items:end; justify-content:space-between; gap:16px; flex-wrap:wrap; margin-bottom:20px;">
        <p style="opacity:.8; margin:.25rem 0 0;">
          Fotos, precios en guaraníes y botón directo a WhatsApp.
          <span id="contadorProductos" style="margin-left:8px; font-weight:600; opacity:.9;"></span>
        </p>
        <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
          <input id="buscar" type="search" placeholder="Buscar…" aria-label="Buscar productos"
                 style="padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#0f172a; color:#fff; min-width:220px;">
          <select id="filtroCategoria" style="padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#0f172a; color:#fff;">
            <option value="">Todas</option>
            <option value="Telefonía">Telefonía</option>
            <option value="Computación">Computación</option>
            <option value="Audio">Audio</option>
            <option value="Electro">Electro</option>
          </select>
          <select id="ordenar" style="padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#0f172a; color:#fff;">
            <option value="relevancia">Ordenar: Relevancia</option>
            <option value="precio-asc">Precio: menor a mayor</option>
            <option value="precio-desc">Precio: mayor a menor</option>
            <option value="nombre-asc">Nombre: A → Z</option>
            <option value="nombre-desc">Nombre: Z → A</option>
            <option value="nuevo">Más nuevos primero</option>
          </select>
          <button id="btnLimpiar" type="button"
                  style="margin-left:8px;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.15);background:#0f172a;color:#fff;cursor:pointer;">
            Limpiar filtros
          </button>
        </div>
      </header>

      <div id="gridProductos" aria-live="polite"
           style="display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px;">
        <p style="opacity:.85;margin:.5rem 0">Cargando catálogo…</p>
      </div>

      <template id="tplProducto">
        <article class="card" style="background:#0b1220; border:1px solid rgba(255,255,255,.1); border-radius:16px; overflow:hidden; display:flex; flex-direction:column;">
          <div style="position:relative; aspect-ratio:1/1; background:#0d1b2a;">
            <!-- NOTA: el src final lo setea el JS con lazy-load -->
            <img alt="" loading="lazy" class="lazy-img" style="width:100%; height:100%; object-fit:cover; display:block;">
            <span class="badge" style="position:absolute; top:10px; left:10px; background:#1d4ed8; color:#fff; padding:4px 8px; border-radius:999px; font-size:12px;"></span>
          </div>
          <div style="padding:14px; display:flex; flex-direction:column; gap:8px;">
            <h3 style="font-size:16px; margin:0; line-height:1.2;"></h3>
            <p class="desc" style="opacity:.8; font-size:14px; margin:0; min-height:38px;"></p>
            <div style="display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:12px; flex-wrap:wrap;">
              <strong class="precio" style="font-size:18px;"></strong>
              <a class="btnWp" target="_blank" rel="noopener"
                 style="text-decoration:none; padding:10px 12px; border-radius:10px; background:#22c55e; color:#0b1220; font-weight:600; display:inline-block; line-height:1;">
                WhatsApp
              </a>
              <button class="btnReservar"
                      style="padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#1d4ed8; color:#fff; font-weight:600; cursor:pointer; display:inline-block; line-height:1;">
                Reservar
              </button>
            </div>
          </div>
        </article>
      </template>
      <noscript><p style="opacity:.85">Para ver el catálogo, activá JavaScript.</p></noscript>
    </section>

    <!-- PREGUNTAS FRECUENTES -->
    <section id="faq" class="section">
      <div class="badge">Preguntas frecuentes</div>
      <h2 style="margin:6px 0 16px 0">Dudas comunes</h2>

      <div class="faq">
        <details>
          <summary>¿Cómo compro un producto?</summary>
          <p>Elegí el producto, tocá el botón <strong>WhatsApp</strong> en su tarjeta y te llevamos al chat con el mensaje listo. Coordinamos entrega y medio de pago por ahí.</p>
        </details>
        <details>
          <summary>¿Qué medios de pago aceptan?</summary>
          <p>Por ahora aceptamos <strong>efectivo</strong> y <strong>transferencia bancaria</strong>. De momento <strong>no ofrecemos compras en cuotas</strong>. Si sumamos más medios de pago, lo vamos a anunciar en esta sección.</p>
        </details>
        <details>
          <summary>¿Hacen envíos?</summary>
          <p>Sí, podemos coordinar envíos en Asunción/Gran Asunción y al interior con transportes. El costo depende de la zona.</p>
        </details>
        <details>
          <summary>¿Los productos tienen garantía?</summary>
          <p>Sí. El plazo depende del artículo y su estado (nuevo/semineuvo/usado). Siempre dejamos el detalle en la descripción o por chat.</p>
        </details>
        <details>
          <summary>¿Qué significa “Usado • Muy bueno / Excelente”?</summary>
          <p>Es el estado estético/funcional: probados, limpios y listos para usar. Ante cualquier duda, te mandamos fotos y video por WhatsApp.</p>
        </details>
      </div>
    </section>
  </main>

  <!-- CONTACTO -->
  <section id="contacto" class="section">
    <div class="badge">Contacto</div>
    <h2 style="margin:6px 0 16px 0">Hablemos</h2>
    <p>Correo: <a href="mailto:esperalopy@gmail.com" rel="noopener">esperalopy@gmail.com</a></p>
    <p>WhatsApp: <a href="https://wa.me/595994252213" target="_blank" rel="noopener noreferrer">+595 994 252 213</a></p>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <p><strong>Esperalopy</strong> · Compra y ventas minoristas</p>
    <p>
      📧 <a href="mailto:esperalopy@gmail.com">esperalopy@gmail.com</a> ·
      💬 <a href="https://wa.me/595994252213" target="_blank" rel="noopener noreferrer">WhatsApp: +595 994 252 213</a>
    </p>
    <p>
      <a href="#servicios">Servicios</a> ·
      <a href="#productos">Productos</a> ·
      <a href="#contacto">Contacto</a>
    </p>
    <p>© 2025 Esperalopy. Todos los derechos reservados.</p>
  </footer>

  <!-- Botón flotante WhatsApp -->
  <a href="https://wa.me/595994252213?text=Hola%20Esperalopy!%20Vengo%20de%20tu%20web%20y%20quiero%20hacer%20una%20consulta."
     class="wp-float" aria-label="Escribir por WhatsApp">💬</a>

  <!-- Botón Volver arriba (visible) -->
  <a href="#inicio" class="to-top show" aria-label="Volver arriba">↑</a>

  <!-- Contenedor Toast -->
  <div id="toast" role="status" aria-live="polite"></div>

  <!-- Catálogo (rompe caché) -->
  <script src="assets/js/products.js?v=21" defer></script>
</body>
</html>
